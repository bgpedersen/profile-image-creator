<div class="container edit-image">
  <div class="menu">
    <button class="btn" (click)="onMakeCircle()">
      Circle
    </button>
    <button class="btn" (click)="onDownload()">
      Download
    </button>
    <button (click)="onReset()" class="btn">reset</button>
  </div>

  <section class="edit">
    <div class="container-image">
      <p class="image-header">Original</p>
      <img #origImg src="" alt="origImg" class="img" />
    </div>

    <div class="container-image">
      <p class="image-header">Edit</p>
      <canvas #canvasEdit id="imgEdit" class="img"></canvas>
    </div>
  </section>

  <div class="download">
    <section
      *ngIf="$downloadUrls | async as downloadUrls; else downloadUrlsLoading"
    >
      <progress max="100" [value]="$uploadProgress | async"></progress>

      <div class="result">
        <ul>
          <li *ngFor="let downloadURL of downloadUrls">
            <a [href]="downloadURL">{{ downloadURL }}</a>
          </li>
        </ul>

        <section
          class="control-bar"
          *ngIf="$uploadState | async as uploadState; else uploadStateLoading"
        >
          <button
            (click)="imageEditorService.task.pause()"
            [disabled]="uploadState === 'paused'"
          >
            Pause
          </button>
          <button
            (click)="imageEditorService.task.cancel()"
            [disabled]="
              !(uploadState === 'paused' || uploadState === 'running')
            "
          >
            Cancel
          </button>
          <button
            (click)="imageEditorService.task.resume()"
            [disabled]="uploadState === 'running'"
          >
            Resume
          </button>
        </section>

        <ng-template #uploadStateLoading>
          uploadStateLoading ...
        </ng-template>
      </div>
    </section>

    <ng-template #downloadUrlsLoading>
      downloadUrlsLoading ...
    </ng-template>
  </div>
</div>
